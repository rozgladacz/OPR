{% extends "base.html" %}
{% block title %}Do druku - {{ roster.name }}{% endblock %}
{% block content %}
<div class="print-header mb-4">
  <h1>{{ roster.name }}</h1>
  <p>Armia: {{ roster.army.name }} | Limit: {{ roster.points_limit or 'brak' }} | Suma: {{ total_cost }}</p>
  <p>Wygenerowano: {{ generated_at.strftime('%Y-%m-%d %H:%M') }} UTC</p>
</div>

<div class="row row-cols-1 row-cols-md-2 g-4">
  {% for item in roster_items %}
  {% set ru = item.instance %}
  <div class="col">
    <div class="card roster-card h-100">
      <div class="card-body">
        <h5 class="card-title">{{ ru.unit.name }} × {{ ru.count }}</h5>
        <p class="card-text">
          Jakość {{ ru.unit.quality }} / Obrona {{ ru.unit.defense }} /
          Wytrzymałość {{ ru.unit.toughness }}
        </p>
        <p class="card-text">
          Uzbrojenie:
          {% if ru.selected_weapon %}
          {{ ru.selected_weapon.effective_name }}
          {% else %}
          {{ item.default_summary }}
          {% endif %}
        </p>
        {% if item.passive_labels %}
        <p class="card-text"><strong>Zdolności pasywne:</strong> {{ item.passive_labels | join(', ') }}</p>
        {% endif %}
        {% if item.active_labels %}
        <p class="card-text"><strong>Zdolności aktywne:</strong> {{ item.active_labels | join(', ') }}</p>
        {% endif %}
        {% if item.aura_labels %}
        <p class="card-text"><strong>Aury:</strong> {{ item.aura_labels | join(', ') }}</p>
        {% endif %}
        <p class="card-text">Koszt pozycji: {{ ru.cached_cost }}</p>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<div class="print-footer mt-4">
  <h3>Suma punktów: {{ total_cost }}{% if roster.points_limit %} / {{ roster.points_limit }}{% endif %}</h3>
</div>
{% endblock %}
